# App Manifest
applications:
###############   develop system #########################
- name: quarano-frontend-dev
  memory: 128M
  buildpacks:
   - https://github.com/cloudfoundry/staticfile-buildpack
  path: ./frontend/dist/apps/quarano-frontend
  command: "$HOME/boot.sh"
  routes:
    - route: quarano-frontend-dev.cfapps.io
    - route: mannheim.quarano.de
- name: quarano-backend-dev
  buildpacks:
    - java_buildpack
  path: ./backend/target/quarano-backend-0.0.1-SNAPSHOT.jar
  services:
    - quarano-postgres-dev
  env:
    JBP_CONFIG_OPEN_JDK_JRE: "{ jre: { version: 11.+ } }"
    SPRING_PROFILES_ACTIVE: develop
    
###############   Mannheim system #########################
- name: quarano-frontend
  memory: 128M
  buildpacks:
   - https://github.com/cloudfoundry/staticfile-buildpack
  path: ./frontend/dist/apps/quarano-frontend
  command: "$HOME/boot.sh"
  routes:
    - route: quarano-frontend.cf.evoila.io
    - route: mannheim.quarano.de
- name: quarano-backend
  buildpacks:
    - java_buildpack
  path: ./backend/target/quarano-backend-0.0.1-SNAPSHOT.jar
  services:
    - database
  routes:
    - route: mannheim-api.quarano.de
  env:
    JBP_CONFIG_OPEN_JDK_JRE: "{ jre: { version: 11.+ } }"
    SPRING_PROFILES_ACTIVE: prod
    QUARANO_APP_HOST: mannheim.quarano.de
    SPRING_FLYWAY_BASELINE_ON_MIGRATE: true
    SPRING_FLYWAY_BASELINE_VERSION: 0